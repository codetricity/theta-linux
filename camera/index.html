
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Configure Linux computers like the Jetson Nano to stream and use RICOH THETA USB API">
      
      
        <meta name="author" content="Oppkey">
      
      
      
        <link rel="prev" href="../usb_api/">
      
      
        <link rel="next" href="../optimization/">
      
      
      <link rel="icon" href="../images/logo-white.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Camera - RICOH THETA Development on Linux</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-GKVKMSBLHK"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-GKVKMSBLHK",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-GKVKMSBLHK",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-green" data-md-color-accent="lime">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#streaming-specifications" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="RICOH THETA Development on Linux" class="md-header__button md-logo" aria-label="RICOH THETA Development on Linux" data-md-component="logo">
      
  <img src="../images/logo-white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RICOH THETA Development on Linux
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Camera
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="RICOH THETA Development on Linux" class="md-nav__button md-logo" aria-label="RICOH THETA Development on Linux" data-md-component="logo">
      
  <img src="../images/logo-white.png" alt="logo">

    </a>
    RICOH THETA Development on Linux
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../equipment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Equipment
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../software/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Software
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../demos/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Demos
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Examples
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../usb_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    USB API
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Camera
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Camera
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#streaming-specifications" class="md-nav__link">
    <span class="md-ellipsis">
      Streaming Specifications
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#long-term-streaming" class="md-nav__link">
    <span class="md-ellipsis">
      Long-Term Streaming
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Long-Term Streaming">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#long-term-streaming-platform-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Long-term Streaming Platform Tests
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleep-and-power-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Sleep and Power Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleep-and-wake" class="md-nav__link">
    <span class="md-ellipsis">
      Sleep and Wake
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#power-off-and-power-on" class="md-nav__link">
    <span class="md-ellipsis">
      Power Off and Power On
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Power Off and Power On">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#turn-camera-off" class="md-nav__link">
    <span class="md-ellipsis">
      Turn Camera Off
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#turn-camera-on-using-jetson-nano" class="md-nav__link">
    <span class="md-ellipsis">
      Turn Camera On Using Jetson Nano
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Turn Camera On Using Jetson Nano">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sample-code-for-jetson-nano" class="md-nav__link">
    <span class="md-ellipsis">
      Sample Code for Jetson Nano
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#turn-camera-on-using-raspberry-pi" class="md-nav__link">
    <span class="md-ellipsis">
      Turn Camera On Using Raspberry Pi
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Turn Camera On Using Raspberry Pi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-libusb-dev" class="md-nav__link">
    <span class="md-ellipsis">
      install libusb-dev
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-hub-ctrlc" class="md-nav__link">
    <span class="md-ellipsis">
      install hub-ctrl.c
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-shell-script-to-cycle-power" class="md-nav__link">
    <span class="md-ellipsis">
      create shell script to cycle power
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-enable-script-to-run-without-sudo-password" class="md-nav__link">
    <span class="md-ellipsis">
      Optional - Enable script to run without sudo password
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-tips-for-raspberry-pi-4" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Tips for Raspberry Pi 4
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../optimization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optimization
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../viewer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Image Viewer
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../help/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Help
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../meetup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Meetup Archive
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#streaming-specifications" class="md-nav__link">
    <span class="md-ellipsis">
      Streaming Specifications
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#long-term-streaming" class="md-nav__link">
    <span class="md-ellipsis">
      Long-Term Streaming
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Long-Term Streaming">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#long-term-streaming-platform-tests" class="md-nav__link">
    <span class="md-ellipsis">
      Long-term Streaming Platform Tests
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleep-and-power-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Sleep and Power Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sleep-and-wake" class="md-nav__link">
    <span class="md-ellipsis">
      Sleep and Wake
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#power-off-and-power-on" class="md-nav__link">
    <span class="md-ellipsis">
      Power Off and Power On
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Power Off and Power On">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#turn-camera-off" class="md-nav__link">
    <span class="md-ellipsis">
      Turn Camera Off
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#turn-camera-on-using-jetson-nano" class="md-nav__link">
    <span class="md-ellipsis">
      Turn Camera On Using Jetson Nano
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Turn Camera On Using Jetson Nano">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sample-code-for-jetson-nano" class="md-nav__link">
    <span class="md-ellipsis">
      Sample Code for Jetson Nano
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#turn-camera-on-using-raspberry-pi" class="md-nav__link">
    <span class="md-ellipsis">
      Turn Camera On Using Raspberry Pi
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Turn Camera On Using Raspberry Pi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-libusb-dev" class="md-nav__link">
    <span class="md-ellipsis">
      install libusb-dev
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-hub-ctrlc" class="md-nav__link">
    <span class="md-ellipsis">
      install hub-ctrl.c
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-shell-script-to-cycle-power" class="md-nav__link">
    <span class="md-ellipsis">
      create shell script to cycle power
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-enable-script-to-run-without-sudo-password" class="md-nav__link">
    <span class="md-ellipsis">
      Optional - Enable script to run without sudo password
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-tips-for-raspberry-pi-4" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Tips for Raspberry Pi 4
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Camera</h1>

<p>You need a THETA V, Z1, or X.  These cameras live stream
with UVC 1.5 in equirectangular.
You can also use a THETA S to stream motionJPEG in dual-fisheye.
The SC2 cannot stream over a USB cable.  However, all models, including the SC2,
can show a live preview in motionJPEG over WiFi or Ethernet. Refer
to <a href="https://github.com/codetricity/ricoh_theta_mjpeg_opencv">ricoh_theta_mjpeg_opencv</a>
for a mjpeg example with OpenCV.</p>
<p>As of January 2024, most people are using the Z1 or the X for streaming over a
USB cable</p>
<h2 id="streaming-specifications">Streaming Specifications</h2>
<p>V and Z1 USB streaming.</p>
<ul>
<li>4K，H264: 3840×1920/29.97fps/120Mbps</li>
<li>2K，H264: 1920×960/29.97fps/42Mbps</li>
</ul>
<p>X USB streaming:</p>
<ul>
<li>4K 3840×1920/30fps/100Mbps</li>
</ul>
<p>As of January 2025, there is a notice on the <a href="https://www.ricoh360.com/theta/">RICOH360 site</a> for the THETA X live streaming:</p>
<blockquote>
<p>The maximum time for streaming 4K/30 fps live streaming is approx 25 minutes (at an ambient temperature of 25°C). The firmware update adds 2K mode, which means that the maximum time for 2K/30 fps live streaming can be distributed for even longer periods of time. If the temperature in the camera rises rapidly due to the surrounding environment or shooting conditions, the shooting time will be even shorter.</p>
</blockquote>
<p>The modes for the sample program
are specified in <a href="https://github.com/ricohapi/libuvc-theta-sample/blob/f8c3caa32bf996b29c741827bd552be605e3e2e2/gst/thetauvc.c#L55">thetauvc.c</a>.</p>
<p>You can specify the resolution in <a href="https://github.com/ricohapi/libuvc-theta-sample/blob/f8c3caa32bf996b29c741827bd552be605e3e2e2/gst/gst_viewer.c#L248">gst_viewer.c</a>.  An example of changing the resolution is <a href="https://github.com/codetricity/libuvc-theta-sample">here</a>.</p>
<h2 id="long-term-streaming">Long-Term Streaming</h2>
<p>With firmware 1.60.1 or newer, the Z1 can stream indefinitely.
The battery will charge when streaming at 4K.  To stream indefinitely,
you need the proper equipment.  </p>
<p>The USB port supplying charge to the RICOH THETA needs to supply approximately 900mA of
current.</p>
<p>In my tests, most USB 3.0, 3.1, and 3.2 ports on Linux computers did not supply the
required electrical current.</p>
<p>If your computer does not supply 900mA of charge while streaming data, you will need
to use a powered hub with the proper specification.</p>
<p>There are different standards for Battery Charging 1.2 for the USB electrical
specification. You will need BC 1.2 CDP to provide 1.5A data plus charge.  The
THETA Z1 will only consume 0.9A of the 1.5A capacity.</p>
<p><img alt="Battery Charging 1.2 table" src="../images/camera/bc_1_2_table.png" /></p>
<p>It's likely that USB Type-C (not USB 3.0 with a USB-C connector) and USB PD can
also deliver over 900mA, but I did not test these.  Note that my Asus Zephyrus laptop
has USB-C connector ports directly the laptop body, but these physical ports comply to the
USB 3.2 specification, not USB-C.  USB 3.2 does not require USB Power Delivery.</p>
<p>From the table below, it would appear that USB 3.2 Gen 2 would deliver the required
electrical current.  However, I wasn't able to keep the Z1 charged indefinitely at 4K
with my ROG Zephyrus G14 GA401.</p>
<p><img alt="USB Power Table" src="../images/camera/usb_power.png" /></p>
<p>Here's the specifications on my laptop.</p>
<p><img alt="Zephyrus laptop specifications" src="../images/camera/zephyrus.png" /></p>
<p>After testing streaming on 5 different
computers, I could only achieve continuous non-stop streaming on one computer.</p>
<p>From our community tests, it appears that the USB 3.0 (or 3.1, 3.2) port needs
to support Battery Charging 1.2 or equivalent.  The Z1 consumes 0.6Amp to 0.9Amps while
streaming 4K.  Without a powered hub, the Raspberry Pi and Jetson Nano cannot
stream indefinitely.</p>
<p>I tested an old <a href="https://www.anker.com/products/variant/7-port-usb-30-hub-/A7505112">Anker 7-Port USB 3.0 hub</a>
that I had on my desk with a Jetson Nano.
The Z1 battery charge increased while it was streaming at 4K.  The Z1 camera body
remained comfortably warm when I touched it, not hot.</p>
<p>In the test setup below, the Anker USB hub is plugged into a power strip. The hub is above
my keyboard.</p>
<p><img alt="Z1 test setup with hub" src="../images/camera/z1_test_setup.png" /></p>
<p>The hub that I am using only has one port that is BC 1.2 compliant.  I needed to use
the BC 1.2 port. </p>
<p><img alt="Anker hub" src="../images/camera/anker_hub.png" /></p>
<p>If I plugged the Z1 into the other 6 ports, the camera would only consume 0.440 Amps.
This is the same electrical current consumption that I saw on the USB 3.1 and 3.2 ports
of the computers I tested.  With the Z1 drawing 0.440 Amps, the battery will drain during streaming.</p>
<p>Using the BC 1.2 port, the camera draws up to 0.8 Amps to 0.9 Amps while charging and streaming.</p>
<p><img alt="Current Draw" src="../images/camera/current_draw.png" /></p>
<p>After the camera passes 90 percent charge, the charging rate appears to slow down. After a long
4K streaming session on the Nano, the Z1 is staying happy at 95 percent charge.</p>
<p><img alt="Z1 charge" src="../images/camera/z1_charge.png" /></p>
<h3 id="long-term-streaming-platform-tests">Long-term Streaming Platform Tests</h3>
<table>
<thead>
<tr>
<th>Platform</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr>
<td>Acer Predator 300 laptop with onboard USB 3.1 ports</td>
<td>success. battery charged while streaming</td>
</tr>
<tr>
<td>Jetson Nano with external powered USB hub with BC 1.2</td>
<td>success. battery charged.</td>
</tr>
<tr>
<td>Jetson Nano using onboard USB 3 ports</td>
<td>fail. battery drained.</td>
</tr>
<tr>
<td>Desktop computer with Intel X99 Wellsburg motherboard and USB 3.1 ports</td>
<td>fail. battery drained</td>
</tr>
<tr>
<td>Asus Zephyrus laptop with USB 3.2 ports</td>
<td>fail. battery drained</td>
</tr>
<tr>
<td>desktop computer with Intel B85 motherboard and USB 3.0 ports</td>
<td>fail. battery drained</td>
</tr>
</tbody>
</table>
<h2 id="sleep-and-power-overview">Sleep and Power Overview</h2>
<p>The camera has three power states:</p>
<ol>
<li>Power off</li>
<li>Power on</li>
<li>Sleep</li>
</ol>
<p>You can use the THETA API over a USB cable to control power off, sleep, and awake.
To turn on the camera from power off, you can use a C library to power cycle the
USB ports on a small board computer such as a Jetson Nano. This is an unofficial
community workaround and is not supported by RICOH.</p>
<table>
<thead>
<tr>
<th>Function</th>
<th>Method</th>
</tr>
</thead>
<tbody>
<tr>
<td>Sleep</td>
<td>USB API</td>
</tr>
<tr>
<td>Awake</td>
<td>USB API</td>
</tr>
<tr>
<td>Power Off</td>
<td>USB API</td>
</tr>
<tr>
<td>Power On</td>
<td>workaround with C library</td>
</tr>
</tbody>
</table>
<h2 id="sleep-and-wake">Sleep and Wake</h2>
<p>If your application can provide power to the
THETA or if the THETA does not have to be dormant for a long time, it is better to use
sleep and awake. You can use the USB API to control sleep and awake. </p>
<p>We used the following process to test sleep and awake:</p>
<ol>
<li><a href="../usb_api/#auto-power-off-delay">Disable auto power off delay</a> and disable auto sleep - you only need to do this once.
The camera will save the setting.</li>
<li><a href="../usb_api/#put-camera-to-sleep">Put camera to sleep</a></li>
<li><a href="../usb_api/#wake-camera-from-sleep">Wake camera from sleep</a></li>
<li>Check if camera status is ready. If the camera is still asleep, send the wake camera again.</li>
</ol>
<p>If you do not have any problems waking the camera up from sleep on the first attempt, you may not need step 4.</p>
<h2 id="power-off-and-power-on">Power Off and Power On</h2>
<p>If you require power off and power on for applications such as placing the THETA on 
a robot, then shipping the robot to another site, you can use a Nano 
or Raspberry Pi to power on the THETA.</p>
<h3 id="turn-camera-off">Turn Camera Off</h3>
<p>The camera can be turned off with the USB API.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>$ ptpcam -R 0x1013
</span></code></pre></div>
<h3 id="turn-camera-on-using-jetson-nano">Turn Camera On Using Jetson Nano</h3>
<p>There is no official way to turn on the camera once it is in a power off state.
We recommend that you use sleep and awake.  If this is not an option,
you can turn the camera on by power cycling the USB ports of the Jetson Nano.</p>
<p>This example uses libusb.</p>
<h4 id="sample-code-for-jetson-nano">Sample Code for Jetson Nano</h4>
<div class="language-c highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="cm">/**************** </span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="cm">* Tested on Jetson Nano running JetPack 4.4</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="cm">* The RICOH THETA V and Z1 will turn on from a power off state when </span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="cm">* the USB cable is plugged into a port. This example  will power cycle</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="cm">* the USB ports of the Nano.  You must have libusb-1.0-0-dev installed</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="cm">* on the Nano and link to it.</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="cm">* </span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="cm">* Additional information on using libusb_control_transfer is below. </span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="cm">* https://www.cs.unm.edu/~hjelmn/libusb_hotplug_api/group__syncio.html</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="cm">*****************/</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string.h&gt;</span>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdint.h&gt;</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;libusb-1.0/libusb.h&gt;</span>
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="kt">unsigned</span><span class="w">        </span><span class="n">vid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0bda</span><span class="p">;</span>
</span><span id="__span-1-20"><a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="kt">unsigned</span><span class="w">        </span><span class="n">pid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x5411</span><span class="p">;</span>
</span><span id="__span-1-21"><a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>
</span><span id="__span-1-22"><a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>
</span><span id="__span-1-23"><a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a><span class="kt">int</span><span class="w"> </span><span class="nf">power_cycle</span><span class="p">(</span><span class="n">libusb_device_handle</span><span class="w"> </span><span class="o">*</span><span class="n">hub_devh</span><span class="p">)</span>
</span><span id="__span-1-24"><a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a><span class="p">{</span>
</span><span id="__span-1-25"><a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
</span><span id="__span-1-26"><a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>
</span><span id="__span-1-27"><a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a><span class="w">        </span><span class="cm">/*ep0 vendor command enable*/</span>
</span><span id="__span-1-28"><a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a><span class="w">        </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">libusb_control_transfer</span><span class="p">(</span><span class="n">hub_devh</span><span class="p">,</span><span class="w"> </span><span class="mh">0x40</span><span class="p">,</span><span class="w"> </span><span class="mh">0x02</span><span class="p">,</span><span class="w"> </span><span class="mh">0x01</span><span class="p">,</span><span class="w"> </span><span class="p">((</span><span class="mh">0x0B</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="mh">0xDA</span><span class="p">)),</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100000</span><span class="p">);</span>
</span><span id="__span-1-29"><a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-30"><a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a><span class="w">                </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;[error]:ep0 vendor command enable fail.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-1-31"><a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a><span class="w">                </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
</span><span id="__span-1-32"><a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a><span class="w">        </span><span class="p">}</span>
</span><span id="__span-1-33"><a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a>
</span><span id="__span-1-34"><a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a><span class="w">        </span><span class="cm">/*ep0 vendor command disable*/</span>
</span><span id="__span-1-35"><a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a><span class="w">        </span><span class="n">libusb_control_transfer</span><span class="p">(</span><span class="n">hub_devh</span><span class="p">,</span><span class="w"> </span><span class="mh">0x40</span><span class="p">,</span><span class="w"> </span><span class="mh">0x1</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
</span><span id="__span-1-36"><a id="__codelineno-1-36" name="__codelineno-1-36" href="#__codelineno-1-36"></a><span class="w">        </span><span class="n">libusb_control_transfer</span><span class="p">(</span><span class="n">hub_devh</span><span class="p">,</span><span class="w"> </span><span class="mh">0x40</span><span class="p">,</span><span class="w"> </span><span class="mh">0x3</span><span class="p">,</span><span class="w"> </span><span class="mh">0x08</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">);</span>
</span><span id="__span-1-37"><a id="__codelineno-1-37" name="__codelineno-1-37" href="#__codelineno-1-37"></a><span class="w">        </span><span class="n">libusb_control_transfer</span><span class="p">(</span><span class="n">hub_devh</span><span class="p">,</span><span class="w"> </span><span class="mh">0x40</span><span class="p">,</span><span class="w"> </span><span class="mh">0x02</span><span class="p">,</span><span class="w"> </span><span class="mh">0x00</span><span class="p">,</span><span class="w"> </span><span class="p">((</span><span class="mh">0x0B</span><span class="o">&lt;&lt;</span><span class="mi">8</span><span class="p">)</span><span class="o">|</span><span class="p">(</span><span class="mh">0xDA</span><span class="p">)),</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">100000</span><span class="p">);</span>
</span><span id="__span-1-38"><a id="__codelineno-1-38" name="__codelineno-1-38" href="#__codelineno-1-38"></a>
</span><span id="__span-1-39"><a id="__codelineno-1-39" name="__codelineno-1-39" href="#__codelineno-1-39"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
</span><span id="__span-1-40"><a id="__codelineno-1-40" name="__codelineno-1-40" href="#__codelineno-1-40"></a><span class="p">}</span>
</span><span id="__span-1-41"><a id="__codelineno-1-41" name="__codelineno-1-41" href="#__codelineno-1-41"></a>
</span><span id="__span-1-42"><a id="__codelineno-1-42" name="__codelineno-1-42" href="#__codelineno-1-42"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
</span><span id="__span-1-43"><a id="__codelineno-1-43" name="__codelineno-1-43" href="#__codelineno-1-43"></a><span class="p">{</span>
</span><span id="__span-1-44"><a id="__codelineno-1-44" name="__codelineno-1-44" href="#__codelineno-1-44"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-1-45"><a id="__codelineno-1-45" name="__codelineno-1-45" href="#__codelineno-1-45"></a><span class="w">    </span><span class="n">libusb_device_handle</span><span class="w">    </span><span class="o">*</span><span class="n">hub_devh</span><span class="p">;</span>
</span><span id="__span-1-46"><a id="__codelineno-1-46" name="__codelineno-1-46" href="#__codelineno-1-46"></a><span class="w">    </span><span class="n">libusb_context</span><span class="w">      </span><span class="o">*</span><span class="n">context</span><span class="p">;</span>
</span><span id="__span-1-47"><a id="__codelineno-1-47" name="__codelineno-1-47" href="#__codelineno-1-47"></a>
</span><span id="__span-1-48"><a id="__codelineno-1-48" name="__codelineno-1-48" href="#__codelineno-1-48"></a><span class="w">    </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">libusb_init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">context</span><span class="p">);</span>
</span><span id="__span-1-49"><a id="__codelineno-1-49" name="__codelineno-1-49" href="#__codelineno-1-49"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ret</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">){</span>
</span><span id="__span-1-50"><a id="__codelineno-1-50" name="__codelineno-1-50" href="#__codelineno-1-50"></a><span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;[error]:libusb init fail.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-1-51"><a id="__codelineno-1-51" name="__codelineno-1-51" href="#__codelineno-1-51"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
</span><span id="__span-1-52"><a id="__codelineno-1-52" name="__codelineno-1-52" href="#__codelineno-1-52"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-1-53"><a id="__codelineno-1-53" name="__codelineno-1-53" href="#__codelineno-1-53"></a>
</span><span id="__span-1-54"><a id="__codelineno-1-54" name="__codelineno-1-54" href="#__codelineno-1-54"></a><span class="w">    </span><span class="n">hub_devh</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">libusb_open_device_with_vid_pid</span><span class="p">(</span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">vid</span><span class="p">,</span><span class="w"> </span><span class="n">pid</span><span class="p">);</span>
</span><span id="__span-1-55"><a id="__codelineno-1-55" name="__codelineno-1-55" href="#__codelineno-1-55"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">hub_devh</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-1-56"><a id="__codelineno-1-56" name="__codelineno-1-56" href="#__codelineno-1-56"></a><span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;[error]:open device %04x:%04x fail.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">vid</span><span class="p">,</span><span class="w"> </span><span class="n">pid</span><span class="p">);</span>
</span><span id="__span-1-57"><a id="__codelineno-1-57" name="__codelineno-1-57" href="#__codelineno-1-57"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">-1</span><span class="p">;</span>
</span><span id="__span-1-58"><a id="__codelineno-1-58" name="__codelineno-1-58" href="#__codelineno-1-58"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-1-59"><a id="__codelineno-1-59" name="__codelineno-1-59" href="#__codelineno-1-59"></a><span class="w">    </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">power_cycle</span><span class="p">(</span><span class="n">hub_devh</span><span class="p">);</span>
</span><span id="__span-1-60"><a id="__codelineno-1-60" name="__codelineno-1-60" href="#__codelineno-1-60"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">ret</span><span class="p">;</span>
</span><span id="__span-1-61"><a id="__codelineno-1-61" name="__codelineno-1-61" href="#__codelineno-1-61"></a><span class="p">}</span>
</span></code></pre></div>
<p>You can test the code by first saving the code in a file called, 
<code>reset_jetson_usb_power.c</code> then follow these steps:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>$<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>libusb-1.0-0-dev
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>$<span class="w"> </span>gcc<span class="w"> </span>-o<span class="w"> </span>power_cycle<span class="w"> </span>reset_jetson_usb_power.c<span class="w"> </span>-lusb-1.0
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>$<span class="w"> </span>sudo<span class="w"> </span>./power_cycle
</span></code></pre></div>
<h3 id="turn-camera-on-using-raspberry-pi">Turn Camera On Using Raspberry Pi</h3>
<h4 id="install-libusb-dev">install libusb-dev</h4>
<p><code>sudo apt-get install libusb-dev</code></p>
<h4 id="install-hub-ctrlc">install hub-ctrl.c</h4>
<p><code>git clone https://github.com/codetricity/hub-ctrl.c</code></p>
<ul>
<li>make and then install in <code>/usr/local/bin</code></li>
</ul>
<h4 id="create-shell-script-to-cycle-power">create shell script to cycle power</h4>
<p>Save the following into <code>/usr/local/sbin/cycle-power.sh</code>.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>/usr/local/bin/hub-ctrl<span class="w"> </span>-h<span class="w"> </span><span class="m">0</span><span class="w"> </span>-P<span class="w"> </span><span class="m">2</span><span class="w"> </span>-p<span class="w"> </span><span class="m">0</span><span class="w"> </span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>sleep<span class="w"> </span><span class="m">2</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>/usr/local/bin/hub-ctrl<span class="w"> </span>-h<span class="w"> </span><span class="m">0</span><span class="w"> </span>-P<span class="w"> </span><span class="m">2</span><span class="w"> </span>-p<span class="w"> </span><span class="m">1</span>
</span></code></pre></div>
<h4 id="optional-enable-script-to-run-without-sudo-password">Optional - Enable script to run without sudo password</h4>
<p>This is a potential security risk.  If you want to avoid having to enter
a password and are comfortable with the risk, then follow the steps
in <a href="https://askubuntu.com/questions/155791/how-do-i-sudo-a-command-in-a-script-without-being-asked-for-a-password">this article</a>.</p>
<h4 id="additional-tips-for-raspberry-pi-4">Additional Tips for Raspberry Pi 4</h4>
<p>Thanks to Shun Yamashita of <a href="https://fulldepth.co.jp/">fulldepth</a> for this solution
to cycle the power on the Raspberry Pi 4 USB ports, which has the effect of turning
the THETA Z1 on when it is plugged in with a USB cable. </p>
<p>Shun reported that with the Raspberry Pi 4, the script above did not work.  He wrote
the script below for the RPi 4 which does work.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="ch">#!/bin/bash</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>ptpcam<span class="w"> </span>-R<span class="w"> </span>0x1013
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>/usr/local/bin/hub-ctrl<span class="w"> </span>-h<span class="w"> </span><span class="m">0</span><span class="w"> </span>-P<span class="w"> </span><span class="m">1</span><span class="w"> </span>-p<span class="w"> </span><span class="m">0</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>/usr/local/bin/hub-ctrl<span class="w"> </span>-h<span class="w"> </span><span class="m">0</span><span class="w"> </span>-P<span class="w"> </span><span class="m">2</span><span class="w"> </span>-p<span class="w"> </span><span class="m">0</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>/usr/local/bin/hub-ctrl<span class="w"> </span>-h<span class="w"> </span><span class="m">0</span><span class="w"> </span>-P<span class="w"> </span><span class="m">3</span><span class="w"> </span>-p<span class="w"> </span><span class="m">0</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>/usr/local/bin/hub-ctrl<span class="w"> </span>-h<span class="w"> </span><span class="m">0</span><span class="w"> </span>-P<span class="w"> </span><span class="m">4</span><span class="w"> </span>-p<span class="w"> </span><span class="m">0</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>/usr/local/bin/hub-ctrl<span class="w"> </span>-h<span class="w"> </span><span class="m">1</span><span class="w"> </span>-P<span class="w"> </span><span class="m">1</span><span class="w"> </span>-p<span class="w"> </span><span class="m">0</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>/usr/local/bin/hub-ctrl<span class="w"> </span>-h<span class="w"> </span><span class="m">1</span><span class="w"> </span>-P<span class="w"> </span><span class="m">2</span><span class="w"> </span>-p<span class="w"> </span><span class="m">0</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>/usr/local/bin/hub-ctrl<span class="w"> </span>-h<span class="w"> </span><span class="m">1</span><span class="w"> </span>-P<span class="w"> </span><span class="m">3</span><span class="w"> </span>-p<span class="w"> </span><span class="m">0</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>/usr/local/bin/hub-ctrl<span class="w"> </span>-h<span class="w"> </span><span class="m">1</span><span class="w"> </span>-P<span class="w"> </span><span class="m">4</span><span class="w"> </span>-p<span class="w"> </span><span class="m">0</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>/usr/local/bin/hub-ctrl<span class="w"> </span>-v
</span><span id="__span-4-14"><a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>
</span><span id="__span-4-15"><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>sleep<span class="w"> </span><span class="m">5</span>
</span><span id="__span-4-16"><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>
</span><span id="__span-4-17"><a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>/usr/local/bin/hub-ctrl<span class="w"> </span>-h<span class="w"> </span><span class="m">0</span><span class="w"> </span>-P<span class="w"> </span><span class="m">1</span><span class="w"> </span>-p<span class="w"> </span><span class="m">1</span>
</span><span id="__span-4-18"><a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>/usr/local/bin/hub-ctrl<span class="w"> </span>-h<span class="w"> </span><span class="m">0</span><span class="w"> </span>-P<span class="w"> </span><span class="m">2</span><span class="w"> </span>-p<span class="w"> </span><span class="m">1</span>
</span><span id="__span-4-19"><a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a>/usr/local/bin/hub-ctrl<span class="w"> </span>-h<span class="w"> </span><span class="m">0</span><span class="w"> </span>-P<span class="w"> </span><span class="m">3</span><span class="w"> </span>-p<span class="w"> </span><span class="m">1</span>
</span><span id="__span-4-20"><a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a>/usr/local/bin/hub-ctrl<span class="w"> </span>-h<span class="w"> </span><span class="m">0</span><span class="w"> </span>-P<span class="w"> </span><span class="m">4</span><span class="w"> </span>-p<span class="w"> </span><span class="m">1</span>
</span><span id="__span-4-21"><a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a>/usr/local/bin/hub-ctrl<span class="w"> </span>-h<span class="w"> </span><span class="m">1</span><span class="w"> </span>-P<span class="w"> </span><span class="m">1</span><span class="w"> </span>-p<span class="w"> </span><span class="m">1</span>
</span><span id="__span-4-22"><a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>/usr/local/bin/hub-ctrl<span class="w"> </span>-h<span class="w"> </span><span class="m">1</span><span class="w"> </span>-P<span class="w"> </span><span class="m">2</span><span class="w"> </span>-p<span class="w"> </span><span class="m">1</span>
</span><span id="__span-4-23"><a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a>/usr/local/bin/hub-ctrl<span class="w"> </span>-h<span class="w"> </span><span class="m">1</span><span class="w"> </span>-P<span class="w"> </span><span class="m">3</span><span class="w"> </span>-p<span class="w"> </span><span class="m">1</span>
</span><span id="__span-4-24"><a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a>/usr/local/bin/hub-ctrl<span class="w"> </span>-h<span class="w"> </span><span class="m">1</span><span class="w"> </span>-P<span class="w"> </span><span class="m">4</span><span class="w"> </span>-p<span class="w"> </span><span class="m">1</span>
</span><span id="__span-4-25"><a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a>/usr/local/bin/hub-ctrl<span class="w"> </span>-v
</span></code></pre></div>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/theta360developers" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/theta360dev" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.facebook.com/theta360guide/" target="_blank" rel="noopener" title="www.facebook.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M512 256C512 114.6 397.4 0 256 0S0 114.6 0 256c0 120 82.7 220.8 194.2 248.5V334.2h-52.8V256h52.8v-33.7c0-87.1 39.4-127.5 125-127.5 16.2 0 44.2 3.2 55.7 6.4V172c-6-.6-16.5-1-29.6-1-42 0-58.2 15.9-58.2 57.2V256h83.6l-14.4 78.2H287v175.9C413.8 494.8 512 386.9 512 256"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  </body>
</html>