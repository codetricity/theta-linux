


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Community tests on the RICOH THETA SC2 WiFi API">
      
      
      
        <meta name="author" content="Oppkey">
      
      <link rel="shortcut icon" href="../images/logo-white.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.3.3">
    
    
      
        <title>Image Metadata - RICOH THETA SC2 API Public Community Guide</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.fe0cca5b.min.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/palette.a46bcfb3.min.css">
      
      
        
        
        <meta name="theme-color" content="#8bc34a">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-73311422-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview")})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="light-green" data-md-color-accent="lime">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#image-metadata" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="RICOH THETA SC2 API Public Community Guide" class="md-header-nav__button md-logo" aria-label="RICOH THETA SC2 API Public Community Guide">
      
  <img src="../images/logo-white.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            RICOH THETA SC2 API Public Community Guide
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Image Metadata
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="RICOH THETA SC2 API Public Community Guide" class="md-nav__button md-logo" aria-label="RICOH THETA SC2 API Public Community Guide">
      
  <img src="../images/logo-white.png" alt="logo">

    </a>
    RICOH THETA SC2 API Public Community Guide
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../basic-commands/" title="Basic Commands" class="md-nav__link">
      Basic Commands
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../camera-status/" title="Camera Status" class="md-nav__link">
      Camera Status
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../save-image/" title="Save Image" class="md-nav__link">
      Save Image
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../list-files/" title="List Files" class="md-nav__link">
      List Files
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Image Metadata
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Image Metadata" class="md-nav__link md-nav__link--active">
      Image Metadata
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#problems-with-sc2" class="md-nav__link">
    Problems with SC2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#community-tests" class="md-nav__link">
    Community Tests
  </a>
  
    <nav class="md-nav" aria-label="Community Tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exposure-values-with-sc2" class="md-nav__link">
    exposure values with SC2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exposure-values-with-theta-v" class="md-nav__link">
    exposure values with THETA V
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exposure-values-with-theta-z1" class="md-nav__link">
    exposure values with THETA Z1
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../livepreview/" title="Livepreview Stream" class="md-nav__link">
      Livepreview Stream
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../problems/" title="SC2 API Problems" class="md-nav__link">
      SC2 API Problems
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#problems-with-sc2" class="md-nav__link">
    Problems with SC2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#community-tests" class="md-nav__link">
    Community Tests
  </a>
  
    <nav class="md-nav" aria-label="Community Tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exposure-values-with-sc2" class="md-nav__link">
    exposure values with SC2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exposure-values-with-theta-v" class="md-nav__link">
    exposure values with THETA V
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exposure-values-with-theta-z1" class="md-nav__link">
    exposure values with THETA Z1
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h1 id="image-metadata">Image Metadata</h1>
<p>At this stage, you may want to just download all the images and process all the images on the mobile device or in your cloud. </p>
<p>You can grab the image metadata on your Android mobile phone with 
<a href="https://developer.android.com/reference/android/media/ExifInterface">Android ExifInterface</a>.</p>
<p>Most developers grab all the images and process the data on the device. 
However, if there are hundreds or thousands of images on the camera, you may want to pull some data from images prior to processing.</p>
<h2 id="problems-with-sc2">Problems with SC2</h2>
<p>Unfortunately, <a href="https://api.ricoh/docs/theta-web-api-v2.1/commands/camera._get_metadata/">_getMetadata</a> does 
not work correctly on the SC2 as of July 10, 2020.
You should Run the test yourself for each property you want to use to make sure
that the camera is providing your app with the correct data.</p>
<p>Request</p>
<p><img alt="metadata request" src="../images/metadata/metadata-request.png" /></p>
<p>Response</p>
<p><img alt="metadata response" src="../images/metadata/metadata-response.png" /></p>
<h2 id="community-tests">Community Tests</h2>
<h3 id="exposure-values-with-sc2">exposure values with SC2</h3>
<p>Key takeaways:</p>
<ul>
<li>The RICOH API for the SC2 has a few issues. The <code>getMetadata</code> call does not return the correct image exposure data.</li>
<li>Correct exposure is saved to the file metadata and can be checked with ExifTool</li>
<li>The RICOH API for the THETA V works fine. The <code>getMetadata</code> call returns the correct image exposure data</li>
</ul>
<p>Using a THETA SC2 (Firmware Version: 01.31), I adjusted the exposure to -0.3EV from the mobile app and took a picture.</p>
<p><img alt="mobile app settings" src="../images/metadata/mobile-app-settings.png" /></p>
<p>Ran <a href="https://api.ricoh/docs/theta-web-api-v2.1/commands/camera._get_metadata/">getMetadata</a> using the camera API.</p>
<p>Code snippet is below.</p>
<pre><code class="dart">var url ='http://192.168.1.1/osc/commands/execute';

Map data = {
    'name': 'camera.setOptions',
    'parameters': {
      'options': {
        &quot;exposureCompensation&quot;: 2.0,
      }
    }
  };
</code></pre>

<p>The API returned an ExposureBialsValue of <code>NULL</code>. Also note that the <code>Model</code> and <code>Software</code> values are missing.</p>
<p><img alt="metadata api response" src="../images/metadata/metadata-api-response.png" /></p>
<p>Using <a href="https://exiftool.org/">ExifTool</a> I was able to look at the 
metadata from the raw image file </p>
<p>I found that the raw image contained the correct exposure metadata of -0.3.</p>
<p><img alt="exiftool sc2" src="../images/metadata/exiftool-sc2.png" /></p>
<p>The takeaway is that the SC2 API has some issues. It does not return the correct image exposure metadata information. However, the correct metadata is stored in the image file. </p>
<h3 id="exposure-values-with-theta-v">exposure values with THETA V</h3>
<p>Firmware Version: 3.30.1, <a href="https://api.ricoh/docs/theta-web-api-v2.1/commands/camera._get_metadata/">getMetadata</a></p>
<p>Initially, the ExposureBiasValue is set to zero.</p>
<p><img alt="V exposure bias" src="../images/metadata/v-exposure-bias.png" /></p>
<p>I adjusted the Exposure value to 1.3 from the official mobile app.</p>
<p><img alt="V mobile setting" src="../images/metadata/v-mobile-setting.png" /></p>
<p>I used the API to make sure that the value was consistent. Success!</p>
<p><img alt="V metadata API success" src="../images/metadata/v-metadata-api-success.png" /></p>
<p>Using the API, I changed the ExposureBiasValue with the API to 2.</p>
<p><img alt="V API change exposure" src="../images/metadata/v-api-change-exposure.png" /></p>
<p>I looked at the metadata with the API. ExposureBiasValue = 2. Success!</p>
<p><img alt="V API get metadata" src="../images/metadata/v-api-get-metadata.png" /></p>
<h3 id="exposure-values-with-theta-z1">exposure values with THETA Z1</h3>
<p>I set the exposure compensation to 1.0 using the RICOH API sample
code for this tutorial.  </p>
<p><img alt="Z1 API set exposure" src="../images/metadata/z1-api-set-exposure.png" /></p>
<p>After taking a picture I received the metadata using the RICOH API 
call <code>getMetadata</code></p>
<p>The exposure value was 1.0. Success!</p>
<p><img alt="Z1 API get metdata" src="../images/metadata/z1-api-get-metadata.png" /></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../list-files/" title="List Files" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                List Files
              </div>
            </div>
          </a>
        
        
          <a href="../livepreview/" title="Livepreview Stream" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Livepreview Stream
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made by
        <a href="https://oppkey.com" target="_blank" rel="noopener">
          Oppkey
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/theta360developers" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://twitter.com/theta360dev" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://www.facebook.com/theta360guide/" target="_blank" rel="noopener" title="www.facebook.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.d710d30a.min.js"></script>
      <script src="../assets/javascripts/bundle.4a5ba8d6.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.9b3611bd.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>